HU-COM-RC-013 - Detalle y Análisis de Compras Realizadas por Período, Proveedor, Producto o Condición de Pago - v1.0
1. Título
Detalle y Análisis de Compras Realizadas, por Período, Proveedor, Producto o Condición de Pago
2. Descripción
Como usuario del sistema contable de Restaurant.pe, quiero acceder a un reporte analítico y detallado de las compras realizadas, que me permita filtrarlas por período, proveedor, producto o condición de pago, para analizar el comportamiento de las adquisiciones, evaluar condiciones comerciales y apoyar la toma de decisiones estratégicas de compra.
3. Proceso
* Proceso: Reportes

* Subproceso: Reportes de Compras

* Módulo: Compras

4. Narrativa de Usuario
   * Quiero: Visualizar un reporte dinámico que me permita analizar las compras realizadas según distintos criterios (tiempo, proveedor, producto o condición de pago).

   * Para: Evaluar tendencias, desempeño de proveedores y condiciones financieras de las compras.

   * De manera que: Se optimice la planificación de abastecimiento, negociación y control presupuestal.

5. Regla de Navegabilidad
Ruta: Menú Principal > Compras > Reportes > Detalle y Análisis de Compras Realizadas
6. Criterios de Aceptación
      1. El reporte debe permitir seleccionar uno o varios criterios de análisis:

         * Período (mensual, trimestral, anual)

         * Proveedor

         * Producto

         * Condición de Pago

            2. Debe mostrar el detalle de las órdenes y facturas de compra con información completa de fecha, proveedor, producto, cantidad, monto y estado.

            3. El sistema debe calcular los totales y promedios por cada criterio seleccionado.

            4. Debe incluir indicadores de:

               * Total de compras en el período.

               * Promedio de monto por proveedor.

               * Número de documentos por condición de pago.

                  5. Desde el reporte se podrá acceder al detalle de cada documento de compra (drill down).

                  6. El usuario podrá filtrar, agrupar y ordenar los resultados por cualquiera de los criterios definidos.

                  7. El reporte debe poder exportarse en Excel, PDF y formato gráfico (barras o pastel).

                  8. Toda consulta, exportación o acción de análisis debe registrarse en el log de auditoría contable (usuario, fecha, hora, acción).

                  9. El sistema debe mostrar únicamente la información correspondiente a la razón social y sucursal activa del usuario.

                  10. Debe permitirse programar la generación automática del reporte (diaria, semanal o mensual) y su envío a usuarios autorizados.

7. Campos del Reporte / Columnas de Vista Tabla
Columnas principales:
                     * Fecha de Compra

                     * Número de Documento / Orden

                     * Razón Social de Proveedor

                     * RUC / NIT

                     * Producto / Descripción

                     * Categoría de Producto

                     * Unidad de Medida

                     * Cantidad Comprada

                     * Precio Unitario

                     * Subtotal

                     * Impuestos

                     * Total Compra

                     * Condición de Pago (Contado / Crédito / Plazo)

                     * Días de Crédito

                     * Fecha de Vencimiento

                     * Estado de Pago (Pendiente / Pagado)

                     * Moneda

                     * Sucursal / Almacén

                     * Usuario Responsable

Filtros disponibles:
                        * Rango de Fechas o Período

                        * Razón Social de Proveedor

                        * Producto / Categoría

                        * Condición de Pago
        
                        * Sucursal / Almacén

                        * Estado de Pago

                        * Moneda

Acciones disponibles:
                           * Ver Detalle de Compra

                           * Exportar (Excel / PDF / Gráfico)

                           * Agrupar por Proveedor / Producto / Condición de Pago

                           * Programar Envío Automático

                           * Ver Indicadores Comparativos

8. Detalle de Integración (opcional)
                              * Integración con Compras: para obtener datos de órdenes, facturas y condiciones de pago.

                              * Integración con Contabilidad: para identificar el estado contable y financiero de las compras.

                              * Integración con Finanzas: para validar pagos efectuados y pendientes.

                              * Integración con Maestro de Productos: para identificar categoría, unidad y clasificación del producto.

9. Consideraciones Técnicas
                                 * El sistema debe permitir la generación de reportes dinámicos con agrupaciones automáticas por los criterios seleccionados.

                                 * Los totales deben recalcularse en tiempo real al aplicar filtros.

                                 * Los gráficos deben generarse de manera dinámica según los datos visibles.

                                 * Las acciones (consultas, exportaciones, filtros) deben registrarse en el log de auditoría contable.

                                 * Debe soportar consultas de alto volumen de datos con paginación y optimización de rendimiento.

                                 * En contextos multipaís, debe convertir montos a moneda corporativa (USD) para análisis consolidado.

10. Comentarios
                                    * Este reporte es clave para la evaluación integral de las compras según criterios financieros y logísticos.

                                    * Permite detectar patrones de compra por producto o proveedor, y condiciones de pago más frecuentes.

                                    * Ayuda a controlar la liquidez mediante el análisis de plazos y vencimientos de compras a crédito.

                                    * Se recomienda incorporar KPI’s como:

                                       * % de compras al contado vs crédito.

                                       * Promedio de días de crédito por proveedor.

                                       * Productos más comprados.

                                          * Es útil para auditoría, control presupuestal y planificación de abastecimiento.

                                          * Permite exportar la información en formato detalle o resumen, según perfil del usuario.

                                          * En escenarios multipaís, el reporte debe adaptarse a los formatos tributarios y fiscales locales (factura, nota de débito, guía de remisión).