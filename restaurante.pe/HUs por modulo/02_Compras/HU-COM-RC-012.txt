HU-COM-RC-012 - Reporte de Compras por Categoría de Productos - v1.0
1. Título
Reporte de Compras por Categoría de Productos
2. Descripción
Como usuario del sistema contable de Restaurant.pe, quiero generar un reporte que muestre las compras realizadas clasificadas por categoría de productos, para analizar el comportamiento del gasto por tipo de insumo, materia prima, producto terminado o servicio, y facilitar la toma de decisiones de abastecimiento y control de costos.
3. Proceso
* Proceso: Reportes

* Subproceso: Reportes de Compras

* Módulo: Compras

4. Narrativa de Usuario
   * Quiero: Consultar y analizar las compras agrupadas por categoría de producto.

   * Para: Identificar los grupos de artículos con mayor participación en el gasto total y controlar los presupuestos por línea de producto.

   * De manera que: Pueda optimizar las decisiones de compra, evaluar tendencias de consumo y mejorar la planificación de abastecimiento.

5. Regla de Navegabilidad
Ruta: Menú Principal > Compras > Reportes > Reporte de Compras por Categoría de Productos
6. Criterios de Aceptación
      1. El sistema debe mostrar un reporte consolidado que agrupe las compras por categoría de producto (por ejemplo: carnes, bebidas, limpieza, empaque, etc.).

      2. Debe permitir filtrar por rango de fechas, proveedor, sucursal, almacén, categoría, subcategoría, tipo de documento y moneda.

      3. Cada registro debe mostrar el monto total de compras, la cantidad de productos adquiridos y el porcentaje de participación de cada categoría en el total.

      4. El reporte debe incluir gráficos comparativos (barras o pastel) que representen la distribución de compras por categoría.

      5. Desde el reporte debe ser posible acceder al detalle de las compras asociadas a cada categoría (drill down).

      6. El sistema debe permitir exportar el reporte en formatos Excel, PDF y versión gráfica
La versión gráfica no es un archivo; es una vista dentro del sistema, pero también debe poder exportarse como imagen o PDF.
         1. Gráfico principal:
         1. Barras: Compras por categoría en monto total.
         2. Torta/Pie: Participación porcentual.
         2. Gráficos adicionales opcionales:
         1. Línea de compras mensuales (por categoría).
         2. Top categorías del periodo.
         3. Funcionalidades
         3. Filtros aplicables:
         1. Rango de fechas
         2. Categoría
         3. Proveedor
         4. Moneda
         4. Exportable como:
         1. Imagen (PNG)
         2. PDF
         3. Excel (incluyendo tabla de datos que alimenta el gráfico).

            7. Todas las consultas, exportaciones o visualizaciones deben registrarse en el log de auditoría contable (usuario, fecha, hora, acción).

            8. Sólo se mostrarán los registros de la razón social y sucursal activa del usuario.

            9. El sistema debe calcular automáticamente el monto total, el porcentaje y el promedio por categoría.

            10. Debe ser posible programar la generación automática del reporte (diario, semanal o mensual).

7. Campos del Reporte / Columnas de Vista Tabla
Columnas principales:
               * Categoría de Producto

               * Subcategoría

               * Código del Producto

               * Descripción del Producto

               * Unidad de Medida
               * Documento Fiscal

               * Razón Social de Proveedor

               * Monto Total de Compras

               * Cantidad Comprada

               * Precio Promedio Unitario

               * Porcentaje de Participación (%)

               * Moneda
               * Centro de Costo

               * Fecha de Última Compra

               * Sucursal

Filtros disponibles:
                  * Rango de Fechas

                  * Categoría / Subcategoría

                  * Razón Social de Proveedor

                  * Sucursal / Almacén (Que se visualice solo el reporte de compras realizadas por un determinado almacén o sucursal)

                  * Moneda


                  * Centro de Costo

Acciones disponibles:
                     * Ver Detalle (Información adicional de la compra: usuario que emitió la orden de compra, fecha de emisión de orden de compra, fecha de ingreso al almacén, estado de la orden de la compra)

                     * Exportar (Excel / PDF / Gráfico)

                     * Ver Distribución por Categoría (Visualizar cantidades y porcentajes de artículos por categoría de productos)

                     * Programar Envío Automático

                     * Agrupar por Sucursal o Proveedor

8. Detalle de Integración (opcional)
                        * Integración con Módulo de Compras: para obtener los registros de órdenes y facturas aprobadas.

                        * Integración con Módulo de Almacén: para validar las categorías de productos y su clasificación.

                        * Integración con Contabilidad: para consolidar los gastos por cuenta contable asociada a cada categoría.

9. Consideraciones Técnicas
                           * Las categorías y subcategorías deben tomarse del maestro de artículos definido en el módulo de Compras.

                           * El sistema debe recalcular totales y porcentajes en tiempo real al aplicar filtros.

                           * Los gráficos deben generarse automáticamente en base al rango de fechas y filtros seleccionados.

                           * Las acciones (consultas, exportaciones, gráficos, alertas) deben registrarse en el log de auditoría contable.

                           * En contextos multipaís, los valores deben mostrarse tanto en moneda local como en moneda corporativa (USD).

                           * El rendimiento debe estar optimizado para manejar grandes volúmenes de datos de compra.

10. Comentarios
                              * Este reporte será clave para el análisis de consumo por rubro y el control de gastos operativos en restaurantes de múltiples sucursales.

                              * Permite evaluar la eficiencia de las compras y detectar desviaciones de presupuesto por categoría.

                              * Puede complementarse con un KPI de costo por categoría (%), útil para reportes gerenciales.

                              * En países con normativas tributarias distintas, se debe considerar la clasificación contable del gasto según las cuentas asociadas.

                              * Se recomienda que el sistema permita guardar vistas personalizadas de filtros según el perfil del usuario (compras, contabilidad, administración).

                              * Este reporte también será una herramienta para el planeamiento de abastecimiento y análisis de rentabilidad por línea de producto.