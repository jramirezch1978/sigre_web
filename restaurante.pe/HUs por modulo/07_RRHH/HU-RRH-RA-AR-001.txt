HU-RRH-RA-AR-001 – Generación de Archivos Regulatorios Laborales y Tributarios
Versión: 1.0
________________


1. Título
Genera archivos para autoridades laborales y tributarias locales (formatos parametrizables)
________________


2. Descripción
Como especialista de planillas o responsable de cumplimiento legal, quiero generar archivos electrónicos en los formatos requeridos por las autoridades laborales y tributarias de cada país, para cumplir con las obligaciones legales y evitar sanciones.
________________


3. Proceso
Módulo: RR.HH.
Proceso: Reportes y Analítica
Subproceso: Archivos Regulatorios
________________


4. Narrativa de Usuario
Quiero: Generar archivos oficiales en los formatos definidos por las autoridades laborales y tributarias.
Para: Presentarlos ante entidades como SUNAT, MINTRA, IMSS, SAT, o equivalentes según el país.
De manera que: Se garantice el cumplimiento normativo y la trazabilidad de la información remitida.
________________


5. Regla de Navegabilidad
Ruta: Menú Principal > RR.HH > Reportes y Analítica > Archivos Regulatorios > Generación de Archivos
________________


6. Criterios de Aceptación
* El sistema debe permitir seleccionar el tipo de archivo regulatorio a generar (por ejemplo, AFPNet, PLAME, T-Registro, IMSS, SAT, etc.).

* Debe parametrizar los formatos por país, entidad y estructura de columnas, según normativa vigente.

* Debe integrarse con el módulo de Planillas y Maestros de Personal para obtener los datos necesarios.

* El usuario podrá definir el periodo (mensual, trimestral, anual) y empresa o razón social.

* Los archivos deben generarse en los formatos requeridos (TXT, CSV, XML, XLSX, JSON).

* Debe incluir un validador previo que identifique errores en los datos (campos vacíos, tipos incorrectos, formatos inválidos).

* El sistema debe permitir descargar el archivo validado y registrar la fecha de generación y el usuario responsable.

* Permitir guardar configuraciones de formato personalizadas por país y tipo de reporte.

* El sistema debe mantener un historial de archivos generados, con filtros por fecha, usuario, tipo y estado (pendiente, validado, enviado).

* Opción de firma digital o sello electrónico, si la legislación lo requiere.

* Integración con servicios web oficiales donde aplique (por ejemplo, SUNAT o IMSS).

________________


7. Campos del Formulario / Componentes de la Pantalla
Campo / Elemento
	Tipo de Componente
	Descripción
	Ejemplo / Formato
	Validaciones / Consideraciones UX/UI
	Tipo de Archivo
	Lista desplegable
	Selección del tipo de archivo a generar
	“PLAME”, “AFPNet”, “IMSS”
	Obligatorio. Filtra estructura y país.
	País
	Lista desplegable
	País al que aplica el formato regulatorio
	“Perú”, “México”, “Colombia”
	Filtra reglas de validación.
	Periodo
	Selector de fecha / mes
	Periodo de generación
	“Julio 2025”
	Obligatorio.
	Empresa
	Lista desplegable
	Empresa o razón social
	“Grupo Andino SAC”
	Debe tener datos completos en planillas.
	Sede / Local
	Lista desplegable múltiple
	Sede de trabajo o centro de costo
	“Sucursal Lima, Sucursal Cusco”
	Opcional.
	Botón “Validar Datos”
	Botón
	Ejecuta validación previa a la generación del archivo
	—
	Muestra errores en una tabla.
	Tabla de Validaciones
	Tabla
	Muestra lista de errores o advertencias encontradas
	“Empleado sin AFP asignada”
	Colores: rojo (error), amarillo (advertencia).
	Botón “Generar Archivo”
	Botón principal
	Genera el archivo con formato parametrizado
	—
	Activo solo si no hay errores.
	Tipo de Formato
	Etiqueta / Dropdown
	Define formato de salida
	“TXT”, “CSV”, “XML”
	Configurable por país.
	Ruta de Descarga
	Texto / Link
	Enlace al archivo generado
	“/archivos/PLAME_072025.txt”
	Solo lectura.
	Fecha de Generación
	Campo automático
	Fecha y hora del proceso
	“08/10/2025 15:30”
	Automático.
	Usuario Responsable
	Campo automático
	Usuario que ejecutó el proceso
	“rrhh.admin01”
	Automático.
	Botón “Historial”
	Botón secundario
	Abre el registro de archivos generados
	—
	Filtrable por tipo, usuario o fecha.
	Estado
	Etiqueta de estado
	Indica si el archivo está pendiente, validado o enviado
	“Validado”
	Colores diferenciados.
	________________


8. Detalle de Integración
   * Módulo de Planillas: Para obtener datos de remuneraciones, aportes y deducciones.

   * Módulo de Maestros de Personal: Para obtener datos personales, documentos y afiliaciones.

   * Módulo de Empresas: Para datos tributarios y de registro.

   * API de Entidades Gubernamentales (cuando aplique): Para validación o envío automático de archivos.

________________


9. Consideraciones Técnicas
      * Estructuras de archivos deben almacenarse en tablas de parametrización por país, tipo y versión.

      * Las reglas de validación deben ser configurables mediante scripts o JSON dinámico.

      * Posibilidad de generar múltiples archivos por empresa o consolidado multiempresa.

      * Implementar control de versiones de formatos para asegurar trazabilidad ante cambios normativos.

      * El sistema debe notificar por correo o mensaje interno cuando el archivo esté listo para envío.

      * Compatible con descarga segura y auditoría de accesos.

________________


10. Comentarios
Esta funcionalidad garantiza la conformidad legal con las autoridades laborales y tributarias, reduciendo riesgos de incumplimiento y automatizando procesos manuales.
Recomendaciones UX/UI:
         * Mostrar un progreso de validación con barra visual.

         * Agrupar archivos por país y año fiscal en pestañas.

         * Incluir íconos distintivos por entidad regulatoria.

         * Permitir la descarga masiva de archivos validados en ZIP.

         * Agregar una opción de vista previa del archivo antes de su descarga.