HU-ALM-CON-KDX-001 - Consulta de Stock por Producto y Almacén con Movimiento en Rango Seleccionado - v1.0
1. Título
 Consulta de stock por productos y por almacén seleccionado y el movimiento en rango seleccionado
2. Descripción
 Como usuario del sistema Restaurant.pe, quiero consultar el stock actual de los productos por almacén, así como los movimientos de entrada y salida ocurridos en un rango de fechas determinado, para tener una visión completa y actualizada de la disponibilidad y rotación del inventario.
3. Proceso
 Proceso: Consultas
Subproceso: Kardex / Movimiento de Inventario
Módulo: Almacén
4. Narrativa de Usuario
 Quiero: Visualizar el stock de los productos por almacén y los movimientos realizados dentro de un rango de fechas.
Para: Controlar el nivel de existencias, identificar movimientos anómalos y analizar la rotación del inventario.
De manera que: Se garantice la disponibilidad oportuna de productos y se tomen decisiones informadas sobre abastecimiento, reposición y control de pérdidas.
5. Regla de Navegabilidad
 Ruta: Menú Principal > Almacén > Consultas > Kardex / Movimiento de Inventario > Consulta de Stock y Movimientos
6. Criterios de Aceptación
 El sistema debe permitir:
* Seleccionar el almacén desde el cual se desea consultar el stock.

* Seleccionar uno o varios productos por código, descripción o categoría.

* Definir un rango de fechas para visualizar los movimientos de entrada y salida.

* Mostrar en pantalla el stock inicial, movimientos de entrada, movimientos de salida y stock final dentro del rango indicado.

* Permitir visualizar el detalle de cada movimiento, incluyendo tipo de documento (compra, traslado, ajuste, venta, devolución, etc.), número de documento, fecha, cantidad y valor unitario.

* Permitir consultar el costo promedio y total valorizado del inventario.

* Generar reportes por producto, almacén o rango de fechas.

* Exportar los resultados en Excel o PDF.

* Mostrar los movimientos con su usuario responsable y fecha de registro.

* Incluir filtros por tipo de movimiento, origen del documento o número de referencia.

* Registrar en el log de auditoría cada consulta realizada, incluyendo usuario, fecha, almacén y criterios aplicados.

7. Campos del Reporte / Columnas de Vista Tabla
 Campos principales:
   * Código del Producto

   * Descripción del Producto

   * Categoría / Subcategoría

   * Unidad de Medida

   * Almacén

   * Stock Inicial

   * Entradas (Cantidad y Valor)

   * Salidas (Cantidad y Valor)

   * Stock Final

   * Costo Promedio

   * Valor Total

   * Fecha del Movimiento

   * Tipo de Movimiento

   * Documento Referencia

   * Usuario Responsable

Filtros disponibles:
      * Almacén

      * Producto / Categoría

      * Rango de Fechas

      * Tipo de Movimiento

      * Documento de Origen

      * Usuario

Acciones disponibles:
         * Consultar Movimientos

         * Ver Detalle del Kardex

         * Exportar (Excel / PDF)

         * Filtrar / Limpiar Filtros

         * Ver Log de Auditoría

8. Detalle de Integración (opcional)
 Integración con Inventario y Kardex: para obtener los saldos y movimientos actualizados por producto y almacén.
Integración con Compras, Ventas y Traslados: para identificar el origen de los movimientos registrados.
Integración con Contabilidad: para reflejar el valor del inventario y su impacto en las cuentas contables.
Integración con Auditoría: para registrar todas las consultas y reportes generados.
9. Consideraciones Técnicas
 El sistema debe:
            * Obtener los datos directamente de las tablas de movimientos de inventario.

            * Mostrar la información en tiempo real o según la última actualización registrada.

            * Permitir definir niveles de acceso (por usuario o rol) para visualizar solo los almacenes autorizados.

            * Calcular automáticamente los saldos valorizados con base en el método de costeo definido (promedio ponderado, FIFO, etc.).

            * Garantizar la consistencia de la información entre módulos de almacén, compras y ventas.

            * Permitir parametrizar el formato de salida de los reportes (fechas, moneda, niveles de detalle).

            * Registrar cada consulta en el log de auditoría contable y operativa.

10. Comentarios
 Esta funcionalidad facilita el control continuo del inventario y la trazabilidad de todos los movimientos asociados.
Permite detectar desviaciones, pérdidas o errores de registro en tiempo oportuno.
El reporte de movimientos por rango de fechas puede usarse como base para la conciliación con el Kardex físico y la contabilidad.
Se recomienda incluir indicadores operativos como:
               * Rotación de inventario por producto.

               * Valor total del stock por almacén.

               * Variaciones de stock respecto a periodos anteriores.

Además, el sistema debe garantizar una visualización ágil y filtrable, especialmente en operaciones con alto volumen de transacciones.