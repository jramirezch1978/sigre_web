HU-ALM-OP-DEV-001 - Registro y Gestión de Devoluciones de Compras a Proveedores - v1.0
1. Título
 Devoluciones de compras a proveedores
2. Descripción
 Como usuario del sistema Restaurant.pe, quiero registrar y gestionar las devoluciones de productos comprados a proveedores, permitiendo identificar los artículos devueltos, los motivos de la devolución y la afectación correspondiente al inventario, para mantener actualizada la información de stock, costos y cuentas por pagar.
3. Proceso
 Proceso: Operaciones
Subproceso: Devoluciones
Módulo: Almacén
4. Narrativa de Usuario
 Quiero: Registrar devoluciones de productos a proveedores, con validación de documentos de compra y actualización automática del inventario.
Para: Garantizar la correcta gestión de productos no conformes, sobrantes o rechazados en el proceso de recepción de mercadería.
De manera que: Se mantenga la integridad del inventario, se actualicen las cuentas por pagar y se mantenga trazabilidad en el flujo de devolución.
5. Regla de Navegabilidad
 Ruta: Menú Principal > Almacén > Operaciones > Devoluciones > Devoluciones de Compras a Proveedores
6. Criterios de Aceptación
 El sistema debe permitir:
* Registrar una nueva devolución de compra, asociándola a una factura o guía de ingreso previa.

* Seleccionar el proveedor, el documento de compra y el almacén desde el cual se realiza la devolución.

* Mostrar el detalle de los productos comprados, permitiendo seleccionar cuáles se devuelven y en qué cantidad.

* Registrar el motivo de la devolución (por ejemplo: producto defectuoso, exceso recibido, error en facturación).

* Generar automáticamente el documento de salida de inventario correspondiente a los productos devueltos.

* Permitir la generación de un comprobante de devolución (nota de crédito o documento equivalente) para efectos contables y fiscales.

* Actualizar el Kardex y los saldos de inventario afectados.

* Disminuir automáticamente el saldo pendiente del documento por pagar asociado.

* Validar que no se devuelva más cantidad de la registrada en la compra original.

* Permitir agregar observaciones adicionales y adjuntar archivos de soporte (guías, fotos, notas del proveedor, etc.).

* Registrar todas las acciones (creación, edición, aprobación, anulación) en el log de auditoría contable.

* Exportar el registro de devoluciones a Excel o PDF.

7. Campos del Reporte / Columnas de Vista Tabla
 Campos principales:
   * Número de Devolución

   * Fecha de Devolución

   * Proveedor

   * Número de Factura / Documento de Compra

   * Almacén

   * Código del Producto

   * Descripción del Producto

   * Unidad de Medida

   * Cantidad Comprada

   * Cantidad Devuelta

   * Motivo de Devolución

   * Valor Unitario

   * Valor Total Devuelto

   * Usuario Responsable

   * Estado (Pendiente / Aprobado / Anulado)

   * Observaciones

Filtros disponibles:
      * Rango de Fechas

      * Proveedor

      * Estado de Devolución

      * Almacén

      * Documento de Compra

      * Usuario

Acciones disponibles:
         * Registrar Nueva Devolución

         * Consultar Documento de Compra

         * Editar / Anular Devolución

         * Generar Comprobante (Nota de Crédito)

         * Exportar (Excel / PDF)

         * Ver Log de Auditoría

8. Detalle de Integración (opcional)
 Integración con Compras: para identificar los documentos y productos sujetos a devolución.
Integración con Cuentas por Pagar: para aplicar automáticamente las notas de crédito y actualizar el saldo del proveedor.
Integración con Contabilidad: para registrar el asiento contable correspondiente a la devolución.
Integración con Kardex e Inventario: para reflejar la salida de los productos devueltos y actualizar el stock.
9. Consideraciones Técnicas
 El sistema debe:
            * Validar la coherencia entre las cantidades devueltas y las registradas en el documento de compra original.

            * Actualizar en tiempo real el inventario y los saldos contables asociados.

            * Permitir devoluciones parciales o totales.

            * Generar numeración automática y correlativa para los documentos de devolución.

            * Registrar cada movimiento en el log de auditoría contable con usuario, fecha, hora y acción.

            * Mantener compatibilidad con normativas fiscales locales (SUNAT, DIAN, SII, SENIAT, etc.) para notas de crédito electrónicas.

            * Permitir consultar el asiento contable generado desde el formulario de devolución.

10. Comentarios
 Esta funcionalidad permite un control riguroso de los productos devueltos a proveedores, garantizando la correcta actualización del inventario y la contabilidad.
Facilita la gestión de no conformidades y asegura transparencia en las operaciones de devolución.
Se recomienda incluir indicadores como:
               * Número de devoluciones por proveedor y período.

               * Motivos más frecuentes de devolución.

               * Impacto en el valor de inventario y cuentas por pagar.

Asimismo, puede configurarse para enviar notificaciones automáticas al área de compras o contabilidad cuando se registre o apruebe una devolución.